/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  CODE_ELEMENT_MARK: () => CODE_ELEMENT_MARK,
  INPUT_PATTERN: () => INPUT_PATTERN,
  app: () => app,
  default: () => LiveFormPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian4 = require("obsidian");

// src/settings.ts
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  inputTypes: {
    "": "text",
    "//": "date",
    "#": "number"
  }
};
var LiveFormSettingTab = class extends import_obsidian.PluginSettingTab {
  plugin;
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    const { inputTypes } = this.plugin.settings;
    Object.keys(inputTypes).forEach((prefix) => {
      new import_obsidian.Setting(containerEl).setName(`Edit type for '${prefix}' prefix`).setDesc(`Edit the type for input fields with the '${prefix}' prefix`).addText(
        (text) => text.setPlaceholder("Prefix for the type (e.g. //)").setValue(prefix || "default").onChange(async (newPrefix) => {
          inputTypes[newPrefix] = inputTypes[prefix];
          delete inputTypes[prefix];
          await this.plugin.saveSettings();
        })
      ).addText(
        (text) => text.setPlaceholder("Type (e.g., text, date, number)").setValue(inputTypes[prefix]).onChange(async (value) => {
          inputTypes[prefix] = value;
          await this.plugin.saveSettings();
        })
      ).addButton((button) => {
        button.setIcon("delete").onClick(async () => {
          delete inputTypes[prefix];
          await this.plugin.saveSettings();
          this.display();
        });
      });
    });
    new import_obsidian.Setting(containerEl).setName("Add Prefix").setDesc("Click to add a new prefix to add new inputTypes").addButton(
      (button) => button.setButtonText("Add Prefix").onClick(async () => {
        inputTypes["--"] = "";
        await this.plugin.saveSettings();
        this.display();
      })
    );
  }
};

// src/util.ts
var import_obsidian3 = require("obsidian");

// src/FileSuggester.ts
var import_obsidian2 = require("obsidian");
var InputSuggest = class extends import_obsidian2.AbstractInputSuggest {
  query;
  constructor(app2, textInputEl, queries) {
    super(app2, textInputEl);
    this.queries = queries.map((q) => q.trim());
    textInputEl.addEventListener("change", (event) => event.stopPropagation());
  }
  renderSuggestion(file, el) {
    let { matches = [], path } = file;
    for (let vec of matches.reverse()) {
      path = path.slice(0, vec[0]) + "<b>" + path.slice(vec[0], vec[1]) + "</b>" + path.slice(vec[1]);
    }
    el.setHTML(path);
  }
  selectSuggestion(file, evt) {
    this.textInputEl.value = file.path;
    this.textInputEl.trigger("input");
    this.textInputEl.trigger("select");
    this.textInputEl.value = "";
    this.close();
  }
  async getSuggestions(input_str) {
    const lower_input_str = input_str.toLowerCase();
    let querying = this.queries.map((query) => DataviewAPI.query(query));
    let results = await Promise.all(querying);
    let fuzzy = (0, import_obsidian2.prepareFuzzySearch)(lower_input_str);
    let sorted = results.flatMap((result) => {
      return result.value.values.map((ft) => {
        let result2 = fuzzy(ft.path);
        console.log(ft.path, result2?.score ?? -Infinity);
        return { ...ft, ...result2 };
      });
    }).sort((ft) => ft?.score ?? -Infinity);
    console.log("----------");
    return sorted;
  }
};

// src/objects.ts
function objectSet(root, path, value, isPush) {
  let paths = path.split(/\[(\w+)\]|\.|\["(\w+)"\]/).filter(Boolean);
  let obj = root;
  while (paths.length > 1) {
    let p2 = paths.shift();
    obj[p2] = typeof obj[p2] == "object" ? obj[p2] : {};
    obj = obj[p2];
  }
  let p = paths[0];
  if (isPush) {
    obj[p] = Array.isArray(obj[p]) ? obj[p] : [];
    obj[p].push(value);
  } else {
    obj[p] = value;
  }
}
function objectGet(root, path) {
  let paths = path.split(/\[(\w+)\]|\.|\["(\w+)"\]/).filter(Boolean);
  let current = root;
  do {
    if (current == void 0)
      return void 0;
    let p = paths.shift();
    current = current[p];
  } while (paths.length);
  return current;
}

// src/strings.ts
function stringTemplate(template, modifationObject) {
  return template.replace(/\{(?<key>[^}]+)}/, (_, aaa) => {
    let [key, arg] = aaa.split(":");
    let replacement = modifationObject[key];
    let value = typeof replacement == "function" ? replacement(arg) : replacement;
    return value;
  });
}
var modifications = {
  date: (format = "yyyy-MM-DD") => moment().format(format),
  time: (format = "HH:mm") => moment().format(format)
};
var typeMap = {
  date: "\u{1F4C5}",
  number: "\u{1F522}",
  textarea: "\u{1F4AC}",
  time: "\u231A"
};

// src/util.ts
function getMaxAnotationId(fileContent) {
  let maxId = 1;
  for (let anotation of fileContent.matchAll(INPUT_PATTERN)) {
    let inputFields = anotation.groups;
    let id = inputFields.id?.match(/\d+/) ?? 0;
    maxId = Math.max(id, maxId);
  }
  return maxId;
}
function reformatAnotation(fileContent, textLine) {
  let maxId = 0;
  return textLine.replace(INPUT_PATTERN, (...match) => {
    let group = match.at(-1);
    if (group.id)
      return match[0];
    let content = match[0].slice(1, -1);
    maxId = 1 + (maxId || getMaxAnotationId(fileContent));
    return `\`${content} -${maxId}-\``;
  });
}
function replaceCode2Inputs(root, ctx, settings, app2) {
  const codesEl = root.findAll("code");
  const { workspace } = app2;
  for (let codeEl of codesEl) {
    const text = codeEl.innerText.trim();
    const inputNotation = text.match(CODE_ELEMENT_MARK);
    if (!inputNotation)
      continue;
    const inputFields = inputNotation.groups;
    inputFields.pattern = "`" + text + "`";
    const formEl = createForm(app2, ctx.frontmatter, inputFields);
    formEl.addEventListener("save", async (event) => {
      await saveValue(event, app2, inputFields);
      setTimeout((_) => {
        let { id } = inputFields;
        let element = document.getElementById(id);
        element?.focus();
      }, 10);
    });
    codeEl.replaceWith(formEl);
  }
}
function createForm(app2, frontmatter, inputFields) {
  const DataviewAPI2 = app2.plugins.plugins.dataview;
  inputFields.yaml = inputFields.yaml?.replace(/^:/, "");
  const formEl = createEl("form", { cls: "live-form", title: "" });
  let { options = "", type, continues, input, id } = inputFields;
  const inputEl = createEl(
    type == "textarea" ? "textarea" : "input",
    { type }
  );
  inputEl.style.setProperty("--widther", input.match(/_/g).length);
  inputEl.id = id;
  inputEl.placeholder = generatePlaceholder(inputFields, frontmatter);
  debugger;
  inputEl.title = generateTitle(inputFields);
  const queries = [];
  const { inlineQueryPrefix } = DataviewAPI2.settings;
  options = options.slice(1).trim();
  if (options) {
    const inputOptions = options.split(",");
    for (let opt of inputOptions) {
      opt = opt.trim();
      if (opt.startsWith(inlineQueryPrefix)) {
        let query = opt.replace(DataviewAPI2.settings.inlineQueryPrefix, "");
        queries.push(query);
      } else {
        let [text, value = text] = opt.split("=");
        let label = formEl.createEl("label");
        label.createEl("input", { type: "radio", value });
        label.createSpan({ text });
      }
    }
  }
  if (queries.length) {
    new InputSuggest(app2, inputEl, queries);
  }
  if (queries.length || !options) {
    formEl.append(inputEl);
  }
  if (continues) {
    let divEl = formEl.createEl("div", { cls: "buttons" });
    let submitEl = divEl.createEl("input", {
      cls: "submit",
      value: "save",
      type: "submit"
    });
    submitEl.tabIndex = -1;
    let btnEl = divEl.createEl("button", {
      cls: "close",
      text: "\u{1F5D1}",
      title: "close"
    });
    btnEl.tabIndex = -1;
    btnEl.addEventListener("click", (event) => remove(event, app2, inputFields));
  }
  formEl.addEventListener("change", (event) => event.target.trigger("save"));
  formEl.addEventListener("select", (event) => event.target.trigger("save"));
  formEl.addEventListener("submit", (event) => event.preventDefault());
  formEl.addEventListener("keydown", (event) => {
    if (event.key === "Enter" && (event.metaKey || event.ctrlKey)) {
      event.target.trigger("save");
    }
  });
  return formEl;
}
async function saveValue(event, app2, inputFields) {
  if (event.target.value == "")
    return;
  let { value } = event.target;
  event.target.value = "";
  const { pattern, continues, delimiter, yaml, type, pretext } = inputFields;
  let file = app2.workspace.activeEditor.file;
  if (yaml) {
    await app2.fileManager.processFrontMatter(file, (front) => {
      let key = inputFields.yaml;
      objectSet(front, key, value, !!continues);
      return front;
    });
  } else {
    await app2.vault.process(file, (data) => {
      if (pretext)
        value = stringTemplate(pretext, modifications) + value;
      if (delimiter)
        value += delimiter;
      if (type == "textarea")
        value += "\n";
      if (continues)
        value += pattern;
      return data.replace(pattern, value);
    });
  }
}
function generatePlaceholder(inputFields, frontmatterValues) {
  let { type, placeholder, yaml, continues } = inputFields;
  let yamlPlaceholder = "";
  if (inputFields.yaml) {
    let yamlValue = JSON.stringify(objectGet(frontmatterValues, inputFields.yaml));
    yamlPlaceholder = `:${yaml} (= ${yamlValue ?? "empty"})`;
  }
  let typeAndHolder = [typeMap[type], placeholder].filter(Boolean).join(" ");
  return `${typeAndHolder} ${yamlPlaceholder} ${continues ? "+" : ""}`;
}
function generateTitle(inputFields) {
  let { pattern } = inputFields;
  return pattern;
}
async function remove(event, app2, inputFields) {
  const { pattern, delimiter = "" } = inputFields;
  let file = app2.workspace.activeEditor.file;
  await app2.vault.process(file, (data) => {
    return data.replace(delimiter + pattern, "");
  });
}

// src/main.ts
var BASE_MARK = new RegExp([
  /(?<pretext>.*)\b(?<type>[^_`]*?)/,
  // input type
  /(?<input>__+(?<placeholder>[^_`]*)__+)/,
  // mandatory input pattern
  /(?<continues>(?<delimiter>.+(?=\+\+))?(\+\+))?/,
  // continue mark
  // /(?<options>,[-\w= ,#@$]+)?/,
  /(?<options>,.+?)?/,
  /(?<yaml>:[\w.]+)?/,
  /(?<id> -\d+-)?/
].map((r) => r.source).join("\\s*?"), "");
var CODE_ELEMENT_MARK = new RegExp(`${BASE_MARK.source}$`);
var INPUT_PATTERN = new RegExp(`\`${BASE_MARK.source}\``, "g");
console.log("INPUT_PATTERN", INPUT_PATTERN);
var app;
var LiveFormPlugin = class extends import_obsidian4.Plugin {
  settings = {};
  id = 1;
  async onload() {
    app = this.app;
    console.log("loading live-form plugin");
    this.app.workspace.on("editor-change", async (editor) => {
      let cur = editor.getCursor();
      let textLine = editor.getLine(cur.line);
      let fileContent = editor.getValue();
      let reformatText = reformatAnotation(fileContent, textLine);
      if (textLine === reformatText)
        return;
      editor.setLine(cur.line, reformatText);
      editor.setCursor(cur);
    });
    this.registerMarkdownPostProcessor(
      (root, ctx) => {
        return replaceCode2Inputs(root, ctx, this.settings, this.app);
      }
    );
    await this.loadSettings();
    this.addSettingTab(new LiveFormSettingTab(this.app, this));
  }
  onunload() {
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3NldHRpbmdzLnRzIiwgInNyYy91dGlsLnRzIiwgInNyYy9GaWxlU3VnZ2VzdGVyLnRzIiwgInNyYy9vYmplY3RzLnRzIiwgInNyYy9zdHJpbmdzLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQge1xuXHRNYXJrZG93blZpZXcsXG5cdFBsdWdpbixcblx0QXBwLFxufSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQge0xpdmVGb3JtU2V0dGluZ1RhYiwgREVGQVVMVF9TRVRUSU5HU30gZnJvbSBcIi4vc2V0dGluZ3NcIjtcbmltcG9ydCB7cmVwbGFjZUNvZGUySW5wdXRzLCByZWZvcm1hdEFub3RhdGlvbiwgZ2V0TWF4QW5vdGF0aW9uSWQsIHJlZnJlc2h9IGZyb20gXCIuL3V0aWxcIjtcblxuLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci9GaEVRMlovMVxuLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci9qQzgyNEovMVxuXG4vKlxubWlzc2luZzpcbjEpIHggZm9yIGxpc3Rcbi0tIGJ1dHRvbnMgZm9yIGFkZCB0ZXh0XG5cblxuXG4qL1xuY29uc3QgQkFTRV9NQVJLID0gbmV3IFJlZ0V4cChbXG5cdC8oPzxwcmV0ZXh0Pi4qKVxcYig/PHR5cGU+W15fYF0qPykvLCBcdCBcdFx0Ly8gaW5wdXQgdHlwZVxuXHQvKD88aW5wdXQ+X18rKD88cGxhY2Vob2xkZXI+W15fYF0qKV9fKykvLCBcdFx0XHQvLyBtYW5kYXRvcnkgaW5wdXQgcGF0dGVyblxuXHQvKD88Y29udGludWVzPig/PGRlbGltaXRlcj4uKyg/PVxcK1xcKykpPyhcXCtcXCspKT8vLFx0Ly8gY29udGludWUgbWFya1xuXHQvLyAvKD88b3B0aW9ucz4sWy1cXHc9ICwjQCRdKyk/Lyxcblx0Lyg/PG9wdGlvbnM+LC4rPyk/Lyxcblx0Lyg/PHlhbWw+OltcXHcuXSspPy8sXG5cdC8oPzxpZD4gLVxcZCstKT8vXG5cbl0ubWFwKHIgPT4gci5zb3VyY2UpLmpvaW4oJ1xcXFxzKj8nKSwgJycpXG5cbmV4cG9ydCBjb25zdCBDT0RFX0VMRU1FTlRfTUFSSyA9IG5ldyBSZWdFeHAoYCR7QkFTRV9NQVJLLnNvdXJjZX0kYClcbmV4cG9ydCBjb25zdCBJTlBVVF9QQVRURVJOID0gbmV3IFJlZ0V4cChgXFxgJHtCQVNFX01BUksuc291cmNlfVxcYGAsICdnJylcbmNvbnNvbGUubG9nKCdJTlBVVF9QQVRURVJOJyxJTlBVVF9QQVRURVJOKVxuXG5leHBvcnQgbGV0IGFwcDpBcHBcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExpdmVGb3JtUGx1Z2luIGV4dGVuZHMgUGx1Z2luIHtcblx0c2V0dGluZ3MgPSB7fTtcblx0aWQgPSAxO1xuXG5cdGFzeW5jIG9ubG9hZCgpIHtcblx0XHRhcHAgPSB0aGlzLmFwcDtcblx0XHRjb25zb2xlLmxvZygnbG9hZGluZyBsaXZlLWZvcm0gcGx1Z2luJyk7XG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uKCdlZGl0b3ItY2hhbmdlJywgYXN5bmMgZWRpdG9yID0+IHtcblx0XHRcdGxldCBjdXIgPSBlZGl0b3IuZ2V0Q3Vyc29yKClcblx0XHRcdGxldCB0ZXh0TGluZSA9IGVkaXRvci5nZXRMaW5lKGN1ci5saW5lKVxuXHRcdFx0bGV0IGZpbGVDb250ZW50ID0gZWRpdG9yLmdldFZhbHVlKClcblx0XHRcdGxldCByZWZvcm1hdFRleHQgPSByZWZvcm1hdEFub3RhdGlvbihmaWxlQ29udGVudCwgdGV4dExpbmUpXG5cdFx0XHRpZiAodGV4dExpbmUgPT09IHJlZm9ybWF0VGV4dCkgcmV0dXJuO1xuXHRcdFx0ZWRpdG9yLnNldExpbmUoY3VyLmxpbmUsIHJlZm9ybWF0VGV4dClcblx0XHRcdGVkaXRvci5zZXRDdXJzb3IoY3VyKVxuXHRcdH0pXG5cblx0XHR0aGlzLnJlZ2lzdGVyTWFya2Rvd25Qb3N0UHJvY2Vzc29yKFxuXHRcdFx0KHJvb3QsIGN0eCkgPT4ge1xuXHRcdFx0XHRyZXR1cm4gcmVwbGFjZUNvZGUySW5wdXRzKHJvb3QsIGN0eCwgdGhpcy5zZXR0aW5ncywgdGhpcy5hcHApXG5cdFx0XHR9XG5cdFx0KVxuXHRcdC8vIHRoaXMucmVnaXN0ZXJFdmVudCh0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLm9uKFwiY2hhbmdlZFwiLFxuXHRcdC8vIFx0KHBhdGgsIGRhdGEsIGNhY2hlKSA9PiByZWZyZXNoKHRoaXMuYXBwKVxuXHRcdC8vICkpXG5cblx0XHRhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xuXG5cdFx0Ly8gVGhpcyBhZGRzIGEgc2V0dGluZ3MgdGFiIHNvIHRoZSB1c2VyIGNhbiBjb25maWd1cmUgdmFyaW91cyBhc3BlY3RzIG9mIHRoZSBwbHVnaW5cblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IExpdmVGb3JtU2V0dGluZ1RhYih0aGlzLmFwcCwgdGhpcykpO1xuXG5cdFx0Ly8gdGhpcy5hcHAud29ya3NwYWNlLm9uKCdlZGl0b3ItY2hhbmdlJywoZWRpdG9yKSA9PiBjb25zb2xlLmxvZygnZWRpdG9yLWNoYW5nZScsIGVkaXRvcikgKVxuXHR9XG5cblx0b251bmxvYWQoKSB7XG5cblx0fVxuXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcblx0fVxuXG5cdGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcblx0XHRhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xuXHR9XG59XG5cblxuIiwgImltcG9ydCB7QXBwLCBNb2RhbCwgUGx1Z2luU2V0dGluZ1RhYiwgU2V0dGluZ30gZnJvbSBcIm9ic2lkaWFuXCI7XG5pbXBvcnQgTGl2ZUZvcm1QbHVnaW4gZnJvbSBcIi4vbWFpblwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIE15UGx1Z2luU2V0dGluZ3Mge1xuXHRpbnB1dFR5cGVzOiB7XG5cdFx0W3ByZWZpeDogc3RyaW5nXTogc3RyaW5nO1xuXHR9O1xufVxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6TXlQbHVnaW5TZXR0aW5ncyA9IHtcblx0aW5wdXRUeXBlczoge1xuXHRcdCcnOiAndGV4dCcsXG5cdFx0Jy8vJzogJ2RhdGUnLFxuXHRcdCcjJzogJ251bWJlcicsXG5cdH1cbn1cblxuZXhwb3J0IGNsYXNzIExpdmVGb3JtU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xuXHRwbHVnaW46IExpdmVGb3JtUGx1Z2luO1xuXG5cdGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IExpdmVGb3JtUGx1Z2luKSB7XG5cdFx0c3VwZXIoYXBwLCBwbHVnaW4pO1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHR9XG5cblx0ZGlzcGxheSgpOiB2b2lkIHtcblx0XHRjb25zdCB7Y29udGFpbmVyRWx9ID0gdGhpcztcblxuXHRcdGNvbnRhaW5lckVsLmVtcHR5KCk7XG5cdFx0Y29uc3Qge2lucHV0VHlwZXN9ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Ncblx0XHQvLyBDcmVhdGUgYSBzZXR0aW5nIGZvciBlYWNoIHByZWZpeCBpbiBpbnB1dFR5cGVzXG5cdFx0T2JqZWN0LmtleXMoaW5wdXRUeXBlcykuZm9yRWFjaCgocHJlZml4KSA9PiB7XG5cdFx0XHRuZXcgU2V0dGluZyhjb250YWluZXJFbClcblx0XHRcdFx0LnNldE5hbWUoYEVkaXQgdHlwZSBmb3IgJyR7cHJlZml4fScgcHJlZml4YClcblx0XHRcdFx0LnNldERlc2MoYEVkaXQgdGhlIHR5cGUgZm9yIGlucHV0IGZpZWxkcyB3aXRoIHRoZSAnJHtwcmVmaXh9JyBwcmVmaXhgKVxuXHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT5cblx0XHRcdFx0XHR0ZXh0XG5cdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ1ByZWZpeCBmb3IgdGhlIHR5cGUgKGUuZy4gLy8pJylcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZShwcmVmaXggfHwgJ2RlZmF1bHQnKVxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jIChuZXdQcmVmaXgpID0+IHtcblx0XHRcdFx0XHRcdFx0aW5wdXRUeXBlc1tuZXdQcmVmaXhdID0gIGlucHV0VHlwZXNbcHJlZml4XVxuXHRcdFx0XHRcdFx0XHRkZWxldGUgaW5wdXRUeXBlc1twcmVmaXhdXG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0KVxuXHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT5cblx0XHRcdFx0XHR0ZXh0XG5cdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIoJ1R5cGUgKGUuZy4sIHRleHQsIGRhdGUsIG51bWJlciknKVxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKGlucHV0VHlwZXNbcHJlZml4XSlcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0aW5wdXRUeXBlc1twcmVmaXhdID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0KVxuXHRcdFx0XHQuYWRkQnV0dG9uKGJ1dHRvbj0+e1xuXHRcdFx0XHRcdGJ1dHRvbi5zZXRJY29uKCdkZWxldGUnKVxuXHRcdFx0XHRcdFx0Lm9uQ2xpY2soYXN5bmMgKCk9Pntcblx0XHRcdFx0XHRcdFx0ZGVsZXRlIGlucHV0VHlwZXNbcHJlZml4XVxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKVxuXHRcdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKVxuXHRcdFx0XHRcdFx0fSlcblx0XHRcdFx0fSlcblxuXHRcdH0pO1xuXG5cdFx0Ly8gQWRkIGEgYnV0dG9uIHRvIGR5bmFtaWNhbGx5IGFkZCBtb3JlIHByZWZpeGVzXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnQWRkIFByZWZpeCcpXG5cdFx0XHQuc2V0RGVzYygnQ2xpY2sgdG8gYWRkIGEgbmV3IHByZWZpeCB0byBhZGQgbmV3IGlucHV0VHlwZXMnKVxuXHRcdFx0LmFkZEJ1dHRvbigoYnV0dG9uKSA9PlxuXHRcdFx0XHRidXR0b24uc2V0QnV0dG9uVGV4dCgnQWRkIFByZWZpeCcpLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRcdGlucHV0VHlwZXNbJy0tJ10gPSAnJztcblx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTsgLy8gUmVmcmVzaCB0aGUgZGlzcGxheSB0byByZWZsZWN0IHRoZSBuZXcgcHJlZml4XG5cdFx0XHRcdH0pXG5cdFx0XHQpO1xuXHR9XG59XG4iLCAiaW1wb3J0IHtDT0RFX0VMRU1FTlRfTUFSSywgSU5QVVRfUEFUVEVSTn0gZnJvbSBcIi4vbWFpblwiO1xuaW1wb3J0IHtBcHAsIEVkaXRvciwgTWFya2Rvd25WaWV3LCBURmlsZSwgV29ya3NwYWNlLCBBYnN0cmFjdFRleHRDb21wb25lbnQsIERyb3Bkb3duQ29tcG9uZW50fSBmcm9tIFwib2JzaWRpYW5cIjtcbmltcG9ydCB7TXlQbHVnaW5TZXR0aW5nc30gZnJvbSBcIi4vc2V0dGluZ3NcIjtcbmltcG9ydCB7RmlsZVN1Z2dlc3QsIElucHV0U3VnZ2VzdH0gZnJvbSBcIi4vRmlsZVN1Z2dlc3RlclwiO1xuaW1wb3J0IHtvYmplY3RHZXQsIG9iamVjdFB1c2gsIG9iamVjdFNldH0gZnJvbSBcIi4vb2JqZWN0c1wiO1xuaW1wb3J0IHttb2RpZmljYXRpb25zLCBzdHJpbmdUZW1wbGF0ZSwgdHlwZU1hcH0gZnJvbSBcIi4vc3RyaW5nc1wiO1xuXG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRNYXhBbm90YXRpb25JZChmaWxlQ29udGVudDogc3RyaW5nKSB7XG5cdGxldCBtYXhJZCA9IDE7XG5cdGZvciAobGV0IGFub3RhdGlvbiBvZiBmaWxlQ29udGVudC5tYXRjaEFsbChJTlBVVF9QQVRURVJOKSkge1xuXHRcdGxldCBpbnB1dEZpZWxkcyA9IGFub3RhdGlvbi5ncm91cHNcblx0XHRsZXQgaWQgPSBpbnB1dEZpZWxkcy5pZD8ubWF0Y2goL1xcZCsvKSA/PyAwXG5cdFx0bWF4SWQgPSBNYXRoLm1heChpZCwgbWF4SWQpXG5cdH1cblx0cmV0dXJuIG1heElkO1xufVxuXG4vKipcbiAqIG1hcmsgaW5wdXQgQW5vdGF0aW9uIHBhdHRlcm4gd2l0aCAtaWQtIGlmIG5lZWQgOiBgX19fXyAtaWQtYFxuICovXG5leHBvcnQgZnVuY3Rpb24gcmVmb3JtYXRBbm90YXRpb24oZmlsZUNvbnRlbnQ6IHN0cmluZywgdGV4dExpbmU6IHN0cmluZykge1xuXHRsZXQgbWF4SWQgPSAwXG5cdHJldHVybiB0ZXh0TGluZS5yZXBsYWNlKElOUFVUX1BBVFRFUk4sICguLi5tYXRjaCkgPT4ge1xuXHRcdGxldCBncm91cCA9IG1hdGNoLmF0KC0xKVxuXHRcdGlmIChncm91cC5pZCkgcmV0dXJuIG1hdGNoWzBdXG5cdFx0bGV0IGNvbnRlbnQgPSBtYXRjaFswXS5zbGljZSgxLCAtMSlcblx0XHRtYXhJZCA9IDEgKyAobWF4SWQgfHwgZ2V0TWF4QW5vdGF0aW9uSWQoZmlsZUNvbnRlbnQpKVxuXHRcdHJldHVybiBgXFxgJHtjb250ZW50fSAtJHttYXhJZH0tXFxgYFxuXHR9KVxufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVwbGFjZUNvZGUySW5wdXRzKHJvb3Q6IEhUTUxFbGVtZW50LCBjdHgsIHNldHRpbmdzOiBNeVBsdWdpblNldHRpbmdzLCBhcHA6IEFwcCkge1xuXHRjb25zdCBjb2Rlc0VsID0gcm9vdC5maW5kQWxsKCdjb2RlJylcblx0Y29uc3Qge3dvcmtzcGFjZX0gPSBhcHBcblx0Zm9yIChsZXQgY29kZUVsIG9mIGNvZGVzRWwpIHtcblx0XHRjb25zdCB0ZXh0ID0gY29kZUVsLmlubmVyVGV4dC50cmltKClcblx0XHRjb25zdCBpbnB1dE5vdGF0aW9uID0gdGV4dC5tYXRjaChDT0RFX0VMRU1FTlRfTUFSSylcblx0XHRpZiAoIWlucHV0Tm90YXRpb24pIGNvbnRpbnVlO1xuXHRcdGNvbnN0IGlucHV0RmllbGRzID0gaW5wdXROb3RhdGlvbi5ncm91cHM7XG5cdFx0aW5wdXRGaWVsZHMhLnBhdHRlcm4gPSAnYCcgKyB0ZXh0ICsgJ2AnXG5cdFx0Y29uc3QgZm9ybUVsID0gY3JlYXRlRm9ybShhcHAsIGN0eC5mcm9udG1hdHRlciwgaW5wdXRGaWVsZHMpXG5cdFx0Zm9ybUVsLmFkZEV2ZW50TGlzdGVuZXIoJ3NhdmUnLCBhc3luYyBldmVudCA9PiB7XG5cdFx0XHRhd2FpdCBzYXZlVmFsdWUoZXZlbnQsIGFwcCwgaW5wdXRGaWVsZHMpXG5cdFx0XHRzZXRUaW1lb3V0KF89Pntcblx0XHRcdFx0bGV0IHtpZH0gPSBpbnB1dEZpZWxkc1xuXHRcdFx0XHRsZXQgZWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGlkKVxuXHRcdFx0XHRlbGVtZW50Py5mb2N1cygpXG5cdFx0XHR9LDEwKVxuXG5cdFx0fSlcblx0XHRjb2RlRWwucmVwbGFjZVdpdGgoZm9ybUVsKVxuXHR9XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZUZvcm0oYXBwOiBBcHAsIGZyb250bWF0dGVyLCBpbnB1dEZpZWxkcykge1xuXHRjb25zdCBEYXRhdmlld0FQSSA9IGFwcC5wbHVnaW5zIS5wbHVnaW5zLmRhdGF2aWV3XG5cdGlucHV0RmllbGRzLnlhbWwgPSBpbnB1dEZpZWxkcy55YW1sPy5yZXBsYWNlKC9eOi8sICcnKVxuXHRjb25zdCBmb3JtRWwgPSBjcmVhdGVFbCgnZm9ybScsIHtjbHM6ICdsaXZlLWZvcm0nLCB0aXRsZTogJyd9KVxuXHRsZXQge29wdGlvbnMgPSAnJywgdHlwZSwgY29udGludWVzLCBpbnB1dCwgaWR9ID0gaW5wdXRGaWVsZHNcblxuXHRjb25zdCBpbnB1dEVsID1cblx0XHRjcmVhdGVFbChcblx0XHRcdHR5cGUgPT0gJ3RleHRhcmVhJz8gJ3RleHRhcmVhJyA6ICdpbnB1dCcse3R5cGV9XG5cdFx0KVxuXHRpbnB1dEVsLnN0eWxlLnNldFByb3BlcnR5KCctLXdpZHRoZXInLCBpbnB1dC5tYXRjaCgvXy9nKS5sZW5ndGgpXG5cdGlucHV0RWwuaWQgPSBpZFxuXHRpbnB1dEVsLnBsYWNlaG9sZGVyID0gZ2VuZXJhdGVQbGFjZWhvbGRlcihpbnB1dEZpZWxkcywgZnJvbnRtYXR0ZXIpXG5cdGRlYnVnZ2VyXG5cdGlucHV0RWwudGl0bGUgPSBnZW5lcmF0ZVRpdGxlKGlucHV0RmllbGRzKVxuXG5cdGNvbnN0IHF1ZXJpZXMgPSBbXVxuXHRjb25zdCB7aW5saW5lUXVlcnlQcmVmaXh9ID0gRGF0YXZpZXdBUEkuc2V0dGluZ3Ncblx0b3B0aW9ucyA9IG9wdGlvbnMuc2xpY2UoMSkudHJpbSgpXG5cdGlmIChvcHRpb25zKSB7XG5cdFx0Y29uc3QgaW5wdXRPcHRpb25zID0gb3B0aW9ucy5zcGxpdCgnLCcpXG5cdFx0Zm9yIChsZXQgb3B0IG9mIGlucHV0T3B0aW9ucykge1xuXHRcdFx0b3B0ID0gb3B0LnRyaW0oKVxuXHRcdFx0aWYgKG9wdC5zdGFydHNXaXRoKGlubGluZVF1ZXJ5UHJlZml4KSkge1xuXHRcdFx0XHRsZXQgcXVlcnkgPSBvcHQucmVwbGFjZShEYXRhdmlld0FQSS5zZXR0aW5ncy5pbmxpbmVRdWVyeVByZWZpeCwgJycpXG5cdFx0XHRcdHF1ZXJpZXMucHVzaChxdWVyeSlcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGxldCBbdGV4dCwgdmFsdWUgPSB0ZXh0XSA9IG9wdC5zcGxpdCgnPScpXG5cdFx0XHRcdGxldCBsYWJlbCA9IGZvcm1FbC5jcmVhdGVFbCgnbGFiZWwnKVxuXHRcdFx0XHRsYWJlbC5jcmVhdGVFbCgnaW5wdXQnLCB7dHlwZTogJ3JhZGlvJywgdmFsdWV9KVxuXHRcdFx0XHRsYWJlbC5jcmVhdGVTcGFuKHt0ZXh0fSlcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRpZiAocXVlcmllcy5sZW5ndGgpIHtcblx0XHRuZXcgSW5wdXRTdWdnZXN0KGFwcCwgaW5wdXRFbCwgcXVlcmllcylcblx0fVxuXHRpZiAocXVlcmllcy5sZW5ndGggfHwgIW9wdGlvbnMpIHtcblx0XHRmb3JtRWwuYXBwZW5kKGlucHV0RWwpXG5cdH1cblx0aWYgKGNvbnRpbnVlcykge1xuXHRcdGxldCBkaXZFbCA9IGZvcm1FbC5jcmVhdGVFbCgnZGl2Jyx7Y2xzOididXR0b25zJ30pXG5cdFx0Ly8gY2xvc2UgYnRuXG5cdFx0bGV0IHN1Ym1pdEVsID0gZGl2RWwuY3JlYXRlRWwoJ2lucHV0Jyx7XG5cdFx0XHRjbHM6J3N1Ym1pdCcsIHZhbHVlOidzYXZlJyx0eXBlOidzdWJtaXQnXG5cdFx0fSlcblx0XHRzdWJtaXRFbC50YWJJbmRleCA9IC0xXG5cdFx0bGV0IGJ0bkVsID0gZGl2RWwuY3JlYXRlRWwoJ2J1dHRvbicsIHtcblx0XHRcdGNsczogJ2Nsb3NlJywgdGV4dDogJ1x1RDgzRFx1REREMScsIHRpdGxlOiAnY2xvc2UnXG5cdFx0fSlcblx0XHRidG5FbC50YWJJbmRleCA9IC0xXG5cdFx0YnRuRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBldmVudCA9PiByZW1vdmUoZXZlbnQsIGFwcCwgaW5wdXRGaWVsZHMpKVxuXHR9XG5cblx0Zm9ybUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGV2ZW50ID0+IGV2ZW50LnRhcmdldC50cmlnZ2VyKCdzYXZlJykgKVxuXHRmb3JtRWwuYWRkRXZlbnRMaXN0ZW5lcignc2VsZWN0JywgZXZlbnQgPT4gZXZlbnQudGFyZ2V0LnRyaWdnZXIoJ3NhdmUnKSApXG5cdGZvcm1FbC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBldmVudCA9PiBldmVudC5wcmV2ZW50RGVmYXVsdCgpIClcblx0Zm9ybUVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLGV2ZW50PT4ge1xuXHRcdGlmKGV2ZW50LmtleSA9PT0gXCJFbnRlclwiICYmIChldmVudC5tZXRhS2V5IHx8IGV2ZW50LmN0cmxLZXkpKSB7XG5cdFx0XHRldmVudC50YXJnZXQudHJpZ2dlcignc2F2ZScpXG5cdFx0fVxuXHR9KVxuXHRyZXR1cm4gZm9ybUVsXG59XG5cbmFzeW5jIGZ1bmN0aW9uIHNhdmVWYWx1ZShldmVudDogRXZlbnQsIGFwcCwgaW5wdXRGaWVsZHMpIHtcblx0aWYoZXZlbnQudGFyZ2V0LnZhbHVlID09ICcnKSByZXR1cm4gO1xuXHRsZXQge3ZhbHVlfSA9IGV2ZW50LnRhcmdldFxuXHRldmVudC50YXJnZXQudmFsdWUgPSAnJ1xuXHRjb25zdCB7cGF0dGVybiwgY29udGludWVzLCBkZWxpbWl0ZXIsIHlhbWwsIHR5cGUsIHByZXRleHR9ID0gaW5wdXRGaWVsZHNcblx0bGV0IGZpbGU6IFRGaWxlID0gYXBwLndvcmtzcGFjZS5hY3RpdmVFZGl0b3IhLmZpbGUhXG5cblx0aWYgKHlhbWwpIHtcblx0XHRhd2FpdCBhcHAuZmlsZU1hbmFnZXIucHJvY2Vzc0Zyb250TWF0dGVyKGZpbGUsIGZyb250ID0+IHtcblx0XHRcdGxldCBrZXkgPSBpbnB1dEZpZWxkcy55YW1sXG5cdFx0XHRvYmplY3RTZXQoZnJvbnQsIGtleSwgdmFsdWUsICEhY29udGludWVzKVxuXHRcdFx0cmV0dXJuIGZyb250XG5cdFx0fSlcblx0fSBlbHNlIHtcblx0XHRhd2FpdCBhcHAudmF1bHQucHJvY2VzcyhmaWxlLCAoZGF0YTogc3RyaW5nKSA9PiB7XG5cdFx0XHQvLyBsZXQgbGluZSA9IGRhdGEuc3BsaXQoJ1xcbicpLmZpbHRlciggbGluZSA9PiBsaW5lLmNvbnRhaW5zKHBhdHRlcm4pICkucG9wKClcblx0XHRcdC8vIGxldCBiZWZvcmVQYXR0ZXJuID0gbGluZS5zcGxpdChwYXR0ZXJuKS5zaGlmdCgpXG5cdFx0XHQvLyBsZXQgZW5kV2l0aERlbGltaXRlciA9IGJlZm9yZVBhdHRlcm4uZW5kc1dpdGgoZGVsaW1pdGVyKVxuXHRcdFx0Ly8gbGV0IHRoZXJlSXNEZWxpbWl0ZXIgPSAhIWJlZm9yZVBhdHRlcm4ubWF0Y2goZGVsaW1pdGVyKVxuXHRcdFx0Ly8gbGV0IGlzVGhlRmlyc3RPbmUgPSAhdGhlcmVJc0RlbGltaXRlclxuXG5cdFx0XHRpZihwcmV0ZXh0KSB2YWx1ZSA9IHN0cmluZ1RlbXBsYXRlKHByZXRleHQsbW9kaWZpY2F0aW9ucykgKyB2YWx1ZVxuXHRcdFx0aWYgKGRlbGltaXRlcikgdmFsdWUgKz0gZGVsaW1pdGVyXG5cdFx0XHRpZih0eXBlID09ICd0ZXh0YXJlYScpIHZhbHVlICs9ICdcXG4nXG5cdFx0XHRpZiAoY29udGludWVzKSB2YWx1ZSArPSBwYXR0ZXJuXG5cblx0XHRcdHJldHVybiBkYXRhLnJlcGxhY2UocGF0dGVybiwgdmFsdWUpXG5cdFx0fSlcblx0fVxufVxuZnVuY3Rpb24gZ2VuZXJhdGVQbGFjZWhvbGRlcihpbnB1dEZpZWxkcywgZnJvbnRtYXR0ZXJWYWx1ZXMpIHtcblx0bGV0IHt0eXBlLCBwbGFjZWhvbGRlciwgeWFtbCwgY29udGludWVzfSA9IGlucHV0RmllbGRzXG5cdGxldCB5YW1sUGxhY2Vob2xkZXIgPSAnJ1xuXHRpZiAoaW5wdXRGaWVsZHMueWFtbCkge1xuXHRcdGxldCB5YW1sVmFsdWUgPSBKU09OLnN0cmluZ2lmeShvYmplY3RHZXQoZnJvbnRtYXR0ZXJWYWx1ZXMsIGlucHV0RmllbGRzLnlhbWwpKVxuXHRcdHlhbWxQbGFjZWhvbGRlciA9IGA6JHt5YW1sfSAoPSAke3lhbWxWYWx1ZSA/PyAnZW1wdHknfSlgXG5cdH1cblx0bGV0IHR5cGVBbmRIb2xkZXIgPSBbdHlwZU1hcFt0eXBlXSwgcGxhY2Vob2xkZXJdLmZpbHRlcihCb29sZWFuKS5qb2luKCcgJylcblx0cmV0dXJuIGAke3R5cGVBbmRIb2xkZXJ9ICR7eWFtbFBsYWNlaG9sZGVyfSAke2NvbnRpbnVlcyA/ICcrJyA6ICcnfWBcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVUaXRsZShpbnB1dEZpZWxkcyl7XG5cdGxldCB7cGF0dGVybn0gPSBpbnB1dEZpZWxkc1xuXG5cdHJldHVybiBwYXR0ZXJuXG59XG5cbmFzeW5jIGZ1bmN0aW9uIHJlbW92ZShldmVudCwgYXBwLCBpbnB1dEZpZWxkcykge1xuXHRjb25zdCB7cGF0dGVybixkZWxpbWl0ZXIgPSAnJ30gPSBpbnB1dEZpZWxkc1xuXHRsZXQgZmlsZTogVEZpbGUgPSBhcHAud29ya3NwYWNlLmFjdGl2ZUVkaXRvciEuZmlsZSFcblx0YXdhaXQgYXBwLnZhdWx0LnByb2Nlc3MoZmlsZSwgKGRhdGE6IHN0cmluZykgPT4ge1xuXHRcdHJldHVybiBkYXRhLnJlcGxhY2UoZGVsaW1pdGVyICsgcGF0dGVybiwgJycpXG5cdH0pXG59XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVmcmVzaChhcHA6IEFwcCkge1xuXHRsZXQgZm9jdXNFbGVtZW50ID0gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcblx0YXBwLndvcmtzcGFjZS51cGRhdGVPcHRpb25zKCk7XG5cdC8vIFRyaWdnZXIgYSByZS1yZW5kZXIgb2YgdGhlIGN1cnJlbnQgbm90ZSB3aGVuIHRoZSBzZXR0aW5ncyBjaGFuZ2Vcblx0Ly8gdG8gZm9yY2UgdGhlIHJlZ2lzdGVyTWFya2Rvd25Qb3N0UHJvY2Vzc29yIHRvIHJlcHJvY2VzcyB0aGUgTWFya2Rvd24uXG5cdGNvbnN0IHZpZXcgPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZVZpZXdPZlR5cGUoTWFya2Rvd25WaWV3KTtcblx0aWYgKHZpZXcpIHtcblx0XHRhd2FpdCB2aWV3LnByZXZpZXdNb2RlLnJlcmVuZGVyKHRydWUpO1xuXHRcdGRlYnVnZ2VyXG5cdFx0Zm9jdXNFbGVtZW50LmZvY3VzKClcblx0fVxufVxuIiwgIi8vIENyZWRpdHMgZ28gdG8gTGlhbSdzIFBlcmlvZGljIE5vdGVzIFBsdWdpbjogaHR0cHM6Ly9naXRodWIuY29tL2xpYW1jYWluL29ic2lkaWFuLXBlcmlvZGljLW5vdGVzXG5cbmltcG9ydCB7QWJzdHJhY3RJbnB1dFN1Z2dlc3QsIEFwcCwgVEZpbGUsIGZ1enp5U2VhcmNoLCBnZXRBbGxUYWdzLCBwcmVwYXJlRnV6enlTZWFyY2h9IGZyb20gXCJvYnNpZGlhblwiO1xuXG5leHBvcnQgZW51bSBGaWxlU3VnZ2VzdE1vZGUge1xuXHRUZW1wbGF0ZUZpbGVzLFxuXHRTY3JpcHRGaWxlcyxcbn1cblxuZXhwb3J0IGNsYXNzIElucHV0U3VnZ2VzdCBleHRlbmRzIEFic3RyYWN0SW5wdXRTdWdnZXN0PFRGaWxlPiB7XG5cdHF1ZXJ5OiBzdHJpbmdcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgdGV4dElucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQgfCBIVE1MRGl2RWxlbWVudCwgcXVlcmllczogc3RyaW5nW10pIHtcblx0XHRzdXBlcihhcHAsIHRleHRJbnB1dEVsKTtcblxuXHRcdHRoaXMucXVlcmllcyA9IHF1ZXJpZXMubWFwKHEgPT4gcS50cmltKCkpO1xuXHRcdHRleHRJbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChldmVudCkgPT4gZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCkpXG5cdH1cblxuXHRyZW5kZXJTdWdnZXN0aW9uKGZpbGUsIGVsOiBIVE1MRWxlbWVudCkge1xuXHRcdGxldCB7bWF0Y2hlcyA9IFtdLCBwYXRofSA9IGZpbGVcblx0XHRmb3IgKGxldCB2ZWMgb2YgbWF0Y2hlcy5yZXZlcnNlKCkpIHtcblx0XHRcdHBhdGggPSBwYXRoLnNsaWNlKDAsIHZlY1swXSkgKyAnPGI+JyArIHBhdGguc2xpY2UodmVjWzBdLCB2ZWNbMV0pICsgJzwvYj4nICsgcGF0aC5zbGljZSh2ZWNbMV0pXG5cdFx0fVxuXHRcdGVsLnNldEhUTUwocGF0aCk7XG5cdH1cblxuXHRzZWxlY3RTdWdnZXN0aW9uKGZpbGU6IFRGaWxlLCBldnQ6IE1vdXNlRXZlbnQgfCBLZXlib2FyZEV2ZW50KTogdm9pZCB7XG5cblx0XHR0aGlzLnRleHRJbnB1dEVsLnZhbHVlID0gZmlsZS5wYXRoO1xuXHRcdHRoaXMudGV4dElucHV0RWwudHJpZ2dlcihcImlucHV0XCIpO1xuXHRcdHRoaXMudGV4dElucHV0RWwudHJpZ2dlcihcInNlbGVjdFwiKTtcblx0XHR0aGlzLnRleHRJbnB1dEVsLnZhbHVlID0gJyc7XG5cdFx0dGhpcy5jbG9zZSgpO1xuXHR9XG5cblx0YXN5bmMgZ2V0U3VnZ2VzdGlvbnMoaW5wdXRfc3RyOiBzdHJpbmcpIHtcblx0XHRjb25zdCBsb3dlcl9pbnB1dF9zdHIgPSBpbnB1dF9zdHIudG9Mb3dlckNhc2UoKTtcblx0XHRsZXQgcXVlcnlpbmcgPSB0aGlzLnF1ZXJpZXMubWFwKHF1ZXJ5ID0+IERhdGF2aWV3QVBJLnF1ZXJ5KHF1ZXJ5KSlcblx0XHRsZXQgcmVzdWx0cyA9IGF3YWl0IFByb21pc2UuYWxsKHF1ZXJ5aW5nKVxuXHRcdGxldCBmdXp6eSA9IHByZXBhcmVGdXp6eVNlYXJjaChsb3dlcl9pbnB1dF9zdHIpXG5cdFx0bGV0IHNvcnRlZCA9IHJlc3VsdHMuZmxhdE1hcChyZXN1bHQgPT4ge1xuXHRcdFx0cmV0dXJuIHJlc3VsdC52YWx1ZS52YWx1ZXMubWFwKGZ0ID0+IHtcblx0XHRcdFx0bGV0IHJlc3VsdCA9IGZ1enp5KGZ0LnBhdGgpO1xuXHRcdFx0XHRjb25zb2xlLmxvZyhmdC5wYXRoLCByZXN1bHQ/LnNjb3JlID8/IC1JbmZpbml0eSk7XG5cdFx0XHRcdC8vdG9kbzpmaWx0ciBvdXQgaW5maW5pdHlcblx0XHRcdFx0cmV0dXJuIHsuLi5mdCwgLi4ucmVzdWx0fTtcblx0XHRcdH0pXG5cdFx0fSkuc29ydChmdCA9PiBmdD8uc2NvcmUgPz8gLUluZmluaXR5KVxuXHRcdGNvbnNvbGUubG9nKCctLS0tLS0tLS0tJyk7XG5cdFx0cmV0dXJuIHNvcnRlZFxuXG5cdFx0Ly8gcmV0dXJuIHJlc3VsdC52YWx1ZS52YWx1ZXMuZmlsdGVyKCBmdD0+IGZ0LnBhdGguY29udGFpbnMoaW5wdXRfc3RyKSlcblx0fVxuXG59XG5cbi8vIGV4cG9ydCBjbGFzcyBGaWxlU3VnZ2VzdCBleHRlbmRzIFRleHRJbnB1dFN1Z2dlc3Q8VEZpbGU+IHtcbi8vXG4vLyBcdGdldFN1Z2dlc3Rpb25zKGlucHV0X3N0cjogc3RyaW5nLCBhbGxfZmlsZXM9W10pOiBURmlsZVtdIHtcbi8vIFx0XHRjb25zdCBmaWxlczogVEZpbGVbXSA9IFtdO1xuLy8gXHRcdGNvbnN0IGxvd2VyX2lucHV0X3N0ciA9IGlucHV0X3N0ci50b0xvd2VyQ2FzZSgpO1xuLy9cbi8vIFx0XHRhbGxfZmlsZXMuZm9yRWFjaCgoZmlsZTogVEFic3RyYWN0RmlsZSkgPT4ge1xuLy8gXHRcdFx0aWYgKFxuLy8gXHRcdFx0XHRmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiZcbi8vIFx0XHRcdFx0ZmlsZS5leHRlbnNpb24gPT09IFwibWRcIiAmJlxuLy8gXHRcdFx0XHRmaWxlLnBhdGgudG9Mb3dlckNhc2UoKS5jb250YWlucyhsb3dlcl9pbnB1dF9zdHIpXG4vLyBcdFx0XHQpIHtcbi8vIFx0XHRcdFx0ZmlsZXMucHVzaChmaWxlKTtcbi8vIFx0XHRcdH1cbi8vIFx0XHR9KTtcbi8vXG4vLyBcdFx0cmV0dXJuIGZpbGVzO1xuLy8gXHR9XG4vL1xuLy8gXHRyZW5kZXJTdWdnZXN0aW9uKGZpbGU6IFRGaWxlLCBlbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcbi8vIFx0XHRlbC5zZXRUZXh0KGZpbGUucGF0aCk7XG4vLyBcdH1cbi8vXG4vLyBcdHNlbGVjdFN1Z2dlc3Rpb24oZmlsZTogVEZpbGUpOiB2b2lkIHtcbi8vIFx0XHR0aGlzLmlucHV0RWwudmFsdWUgPSBmaWxlLnBhdGg7XG4vLyBcdFx0dGhpcy5pbnB1dEVsLnRyaWdnZXIoXCJpbnB1dFwiKTtcbi8vIFx0XHR0aGlzLmNsb3NlKCk7XG4vLyBcdH1cbi8vIH1cbiIsICJleHBvcnQgZnVuY3Rpb24gZGVlcEFzc2lnbih0YXJnZXQ6IG9iamVjdCwgLi4uc291cmNlcykge1xuXHRmb3IgKGxldCBzb3VyY2Ugb2Ygc291cmNlcykge1xuXHRcdGZvciAobGV0IGsgaW4gc291cmNlKSB7XG5cdFx0XHRsZXQgdnMgPSBzb3VyY2Vba10sIHZ0ID0gdGFyZ2V0W2tdXG5cdFx0XHRpZiAoT2JqZWN0KHZzKSA9PSB2cyAmJiBPYmplY3QodnQpID09PSB2dCkge1xuXHRcdFx0XHR0YXJnZXRba10gPSBkZWVwQXNzaWduKHZ0LCB2cylcblx0XHRcdFx0Y29udGludWVcblx0XHRcdH1cblx0XHRcdHRhcmdldFtrXSA9IHNvdXJjZVtrXVxuXHRcdH1cblx0fVxuXHRyZXR1cm4gdGFyZ2V0XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmbGF0T2JqZWN0KG9iaikge1xuXHRjb25zdCBmbGF0T2JqZWN0ID0ge307XG5cdGNvbnN0IHBhdGggPSBbXTsgLy8gY3VycmVudCBwYXRoXG5cblx0ZnVuY3Rpb24gZGlnKG9iaikge1xuXHRcdGlmIChvYmogIT09IE9iamVjdChvYmopKVxuXHRcdFx0LyppcyBwcmltaXRpdmUsIGVuZCBvZiBwYXRoKi9cblx0XHRcdHJldHVybiBmbGF0T2JqZWN0W3BhdGguam9pbignLicpXSA9IG9iajsgLyo8LSB2YWx1ZSovXG5cblx0XHQvL25vPyBzbyB0aGlzIGlzIGFuIG9iamVjdCB3aXRoIGtleXMuIGdvIGRlZXBlciBvbiBlYWNoIGtleSBkb3duXG5cdFx0Zm9yIChsZXQga2V5IGluIG9iaikge1xuXHRcdFx0cGF0aC5wdXNoKGtleSk7XG5cdFx0XHRkaWcob2JqW2tleV0pO1xuXHRcdFx0cGF0aC5wb3AoKTtcblx0XHR9XG5cdH1cblxuXHRkaWcob2JqKTtcblx0cmV0dXJuIGZsYXRPYmplY3Q7XG59XG5cbmZ1bmN0aW9uIHVuZmxhdHRlbk9iamVjdChmbGF0dGVuT2JqZWN0KSB7XG5cdGNvbnN0IHVuRmxhdHRlbiA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cdGZvciAobGV0IFtzdHJpbmdLZXlzLCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoZmxhdHRlbk9iamVjdCkpIHtcblx0XHRsZXQgY2hhaW4gPSBzdHJpbmdLZXlzLnNwbGl0KCcuJylcblx0XHRsZXQgb2JqZWN0ID0gdW5GbGF0dGVuXG5cblx0XHRmb3IgKGxldCBbaSwga2V5XSBvZiBjaGFpbi5zbGljZSgwLCAtMSkuZW50cmllcygpKSB7XG5cdFx0XHRpZiAoIW9iamVjdFtrZXldKSB7XG5cdFx0XHRcdGxldCBuZWVkQXJyYXkgPSBOdW1iZXIuaXNJbnRlZ2VyKE51bWJlcihjaGFpblsraSArIDFdKSlcblx0XHRcdFx0b2JqZWN0W2tleV0gPSBuZWVkQXJyYXkgPyBbXSA6IE9iamVjdC5jcmVhdGUobnVsbClcblx0XHRcdH1cblx0XHRcdG9iamVjdCA9IG9iamVjdFtrZXldO1xuXHRcdH1cblx0XHRsZXQgbGFzdGtleSA9IGNoYWluLnBvcCgpO1xuXHRcdG9iamVjdFtsYXN0a2V5XSA9IHZhbHVlO1xuXHR9XG5cdHJldHVybiB1bkZsYXR0ZW47XG59XG5cblxuZXhwb3J0IGZ1bmN0aW9uIG9iamVjdFNldChyb290LCBwYXRoLCB2YWx1ZSwgaXNQdXNoKSB7XG5cdGxldCBwYXRocyA9IHBhdGguc3BsaXQoL1xcWyhcXHcrKVxcXXxcXC58XFxbXCIoXFx3KylcIlxcXS8pLmZpbHRlcihCb29sZWFuKVxuXHRsZXQgb2JqID0gcm9vdDtcblx0d2hpbGUgKHBhdGhzLmxlbmd0aCA+IDEpIHtcblx0XHRsZXQgcCA9IHBhdGhzLnNoaWZ0KClcblx0XHRvYmpbcF0gPSB0eXBlb2Ygb2JqW3BdID09ICdvYmplY3QnID8gb2JqW3BdIDoge307XG5cdFx0b2JqID0gb2JqW3BdXG5cdH1cblx0bGV0IHAgPSBwYXRoc1swXVxuXG5cdGlmIChpc1B1c2gpIHtcblx0XHRvYmpbcF0gPSBBcnJheS5pc0FycmF5KG9ialtwXSkgPyBvYmpbcF0gOiBbXVxuXHRcdG9ialtwXS5wdXNoKHZhbHVlKVxuXHR9ZWxzZSB7XG5cdFx0b2JqW3BdID0gdmFsdWVcblx0fVxufVxuZXhwb3J0IGZ1bmN0aW9uIG9iamVjdEdldChyb290LCBwYXRoKSB7XG5cdGxldCBwYXRocyA9IHBhdGguc3BsaXQoL1xcWyhcXHcrKVxcXXxcXC58XFxbXCIoXFx3KylcIlxcXS8pLmZpbHRlcihCb29sZWFuKVxuXHRsZXQgY3VycmVudCA9IHJvb3Q7XG5cdGRvIHtcblx0XHRpZiAoY3VycmVudCA9PSB2b2lkIDApIHJldHVybiB2b2lkIDA7XG5cdFx0bGV0IHAgPSBwYXRocy5zaGlmdCgpXG5cdFx0Y3VycmVudCA9IGN1cnJlbnRbcF1cblx0fSB3aGlsZSAocGF0aHMubGVuZ3RoKVxuXHRyZXR1cm4gY3VycmVudFxufVxuIiwgImV4cG9ydCBmdW5jdGlvbiBzdHJpbmdUZW1wbGF0ZSh0ZW1wbGF0ZSwgbW9kaWZhdGlvbk9iamVjdCl7XG5cdHJldHVybiB0ZW1wbGF0ZS5yZXBsYWNlKC9cXHsoPzxrZXk+W159XSspfS8sIChfLGFhYSk9Pntcblx0XHRsZXQgW2tleSwgYXJnXSA9IGFhYS5zcGxpdCgnOicpXG5cdFx0bGV0IHJlcGxhY2VtZW50ID0gbW9kaWZhdGlvbk9iamVjdFtrZXldXG5cdFx0bGV0IHZhbHVlID0gdHlwZW9mIHJlcGxhY2VtZW50ID09ICdmdW5jdGlvbic/IHJlcGxhY2VtZW50KGFyZyk6cmVwbGFjZW1lbnQ7XG5cblx0XHRyZXR1cm4gdmFsdWVcblx0fSApXG59XG5cbmV4cG9ydCBjb25zdCBtb2RpZmljYXRpb25zID0ge1xuXHRkYXRlOihmb3JtYXQ9J3l5eXktTU0tREQnKT0+IG1vbWVudCgpLmZvcm1hdChmb3JtYXQpLFxuXHR0aW1lOihmb3JtYXQgPSAnSEg6bW0nKSA9PiBtb21lbnQoKS5mb3JtYXQoZm9ybWF0KVxufVxuXG5leHBvcnQgY29uc3QgdHlwZU1hcCA9IHtcblx0ZGF0ZTogJ1x1RDgzRFx1RENDNScsXG5cdG51bWJlcjonXHVEODNEXHVERDIyJyxcblx0dGV4dGFyZWE6J1x1RDgzRFx1RENBQycsXG5cdHRpbWU6J1x1MjMxQSdcbn1cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFBQSxtQkFJTzs7O0FDSlAsc0JBQW9EO0FBUTdDLElBQU0sbUJBQW9DO0FBQUEsRUFDaEQsWUFBWTtBQUFBLElBQ1gsSUFBSTtBQUFBLElBQ0osTUFBTTtBQUFBLElBQ04sS0FBSztBQUFBLEVBQ047QUFDRDtBQUVPLElBQU0scUJBQU4sY0FBaUMsaUNBQWlCO0FBQUEsRUFDeEQ7QUFBQSxF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
